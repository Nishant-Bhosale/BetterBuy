"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[693],{3134:function(e,t,r){r.d(t,{Z:function(){return D}});var n=r(1413),a=r(2791),s="ProductContainer_productContainer__4IWWw",c=r(184),o=function(e){var t=e.children;return(0,c.jsx)("div",{className:s,children:t})},i=r(4165),u=r(5861),d=r(9439),l="ProductDetails_productDetails__WFbqT",p="ProductDetails_heading__5plXk",h="ProductDetails_productName__iYjDl",m="ProductDetails_productOptions__BPaKn",f="ProductDetails_addBtn__t3gel",x="ProductDetails_updateBtn__F3I1O",v="ProductDetails_editForm__YEg5s",g="ProductDetails_sold__xevGi",j=r(3463),_=r(5568),Z=r(3467),C=r(2388),P=r(7689),k=function(e){var t=e.name,r=e.price,n=e.onOwnPage,s=e.sold,o=e.forSale,k=e.productId,y=e.onCart,w=(0,a.useState)(o),N=(0,d.Z)(w,2),b=N[0],S=N[1],D=(0,a.useState)(!1),I=(0,d.Z)(D,2),O=I[0],A=I[1],F=(0,a.useState)(!1),T=(0,d.Z)(F,2),Y=T[0],B=T[1],W=(0,a.useContext)(Z.Z).user,E=(0,P.s0)(),G=function(){var e=(0,u.Z)((0,i.Z)().mark((function e(t){var r;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),B(!0),e.prev=2,e.next=5,C.Z.put("/api/product/edit/".concat(k),{forSale:b},{headers:{"Content-Type":"application/json"}});case 5:r=e.sent,_.Am.success(r.data.message),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),_.Am.error(e.t0.response.data.message);case 12:return e.prev=12,B(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=(0,u.Z)((0,i.Z)().mark((function e(){var t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A(!0),null!==W&&void 0!==W&&W.token){e.next=3;break}return e.abrupt("return",E("/login"));case 3:return e.prev=3,e.next=6,C.Z.post("/api/product/cart/".concat(k));case 6:t=e.sent,_.Am.success(t.data.message),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0),_.Am.error(e.t0.response.data.message);case 14:return e.prev=14,A(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[3,10,14,17]])})));return function(){return e.apply(this,arguments)}}();return(0,c.jsxs)("div",{className:l,children:[(0,c.jsx)("div",{className:h,children:(0,c.jsx)("p",{children:t})}),(0,c.jsx)("div",{className:m,children:(0,c.jsxs)("p",{children:["\u20b9 ",r]})}),(0,c.jsx)(c.Fragment,{children:y?(0,c.jsx)("div",{className:g,children:s?"Sold":"Not Sold"}):n?s?(0,c.jsx)("div",{className:g,children:"Sold"}):(0,c.jsxs)(j.l0,{onSubmit:G,className:v,children:[(0,c.jsxs)(j.__,{check:!0,className:p,children:[(0,c.jsx)(j.II,{type:"checkbox",checked:b,onChange:function(){S((function(e){return!e}))}}),"For Sale"]}),(0,c.jsx)("button",{className:x,children:Y?(0,c.jsx)(j.$j,{}):"Update"})]}):(0,c.jsx)("button",{className:f,title:"Add to Cart",onClick:K,children:O?(0,c.jsx)(j.$j,{}):"Add To Cart"})})]})},y="ProductImage_imageContainer__nYj1K",w=function(e){var t=e.image;return(0,c.jsx)("div",{className:y,children:(0,c.jsx)("img",{src:"data:image/*;base64,".concat(t),alt:"Product Image",width:"100%",height:"100%",style:{objectFit:"contain"}})})},N=function(e){var t=e.product,r=t.name,n=t.price,a=t.image,s=t.sold,i=t.forSale,u=t._id,d=e.onOwnPage,l=e.onCart;return(0,c.jsxs)(o,{children:[(0,c.jsx)(w,{image:a}),(0,c.jsx)(k,{name:r,price:n,sold:s,forSale:i,onOwnPage:d,productId:u,onCart:l})]})},b="ProductGrid_grid__v9pJc",S=function(e){var t=e.children,r=e.style;return(0,c.jsx)("div",{className:b,style:(0,n.Z)({},r),children:t})},D=function(e){var t=e.products,r=e.style,a=e.onOwnPage,s=e.onCart;return(0,c.jsx)(S,{style:(0,n.Z)({},r),children:t.map((function(e,t){return(0,c.jsx)(N,{product:e,onOwnPage:a,onCart:s},t)}))})}},4693:function(e,t,r){r.r(t);var n=r(4165),a=r(5861),s=r(9439),c=r(2791),o=r(4030),i=r(2388),u=r(5568),d=r(3134),l=r(8322),p=r(184);t.default=function(){var e=(0,c.useState)(!0),t=(0,s.Z)(e,2),r=t[0],h=t[1],m=(0,c.useState)([]),f=(0,s.Z)(m,2),x=f[0],v=f[1],g=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.Z.get("/api/product/purchased");case 3:t=e.sent,console.log(t),v(t.data.products),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),u.Am.error(e.t0.response.data.message);case 12:return e.prev=12,h(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[0,8,12,15]])})));return function(){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){g()}),[]),r?(0,p.jsx)(o.Z,{}):(0,p.jsxs)("div",{children:[(0,p.jsx)("h1",{style:{textAlign:"center",margin:"1rem 0"},children:x.length?"My Orders!":"No Orders Yet!"}),x.length?(0,p.jsx)(d.Z,{products:x,onCart:!0}):(0,p.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",paddingTop:"1rem"},children:(0,p.jsx)("img",{style:{margin:"auto"},src:l,alt:"No products Found",height:"50%",width:"50%"})})]})}},8322:function(e,t,r){e.exports=r.p+"static/media/empty_cart.763e59420e7923dd3c6d.jpg"}}]);
//# sourceMappingURL=693.f5ffbede.chunk.js.map