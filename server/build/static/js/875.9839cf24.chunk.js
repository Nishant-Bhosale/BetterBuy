"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[875],{3134:function(e,t,r){r.d(t,{Z:function(){return S}});var n=r(1413),a=r(2791),c="ProductContainer_productContainer__4IWWw",s=r(184),o=function(e){var t=e.children;return(0,s.jsx)("div",{className:c,children:t})},u=r(4165),i=r(5861),d=r(9439),l="ProductDetails_productDetails__WFbqT",p="ProductDetails_heading__5plXk",m="ProductDetails_productName__iYjDl",h="ProductDetails_productOptions__BPaKn",f="ProductDetails_addBtn__t3gel",x="ProductDetails_updateBtn__F3I1O",_="ProductDetails_editForm__YEg5s",g="ProductDetails_sold__xevGi",v=r(3463),j=r(5568),P=r(3467),N=r(2388),Z=r(7689),y=function(e){var t=e.name,r=e.price,n=e.onOwnPage,c=e.sold,o=e.forSale,y=e.productId,C=e.onCart,w=(0,a.useState)(o),b=(0,d.Z)(w,2),k=b[0],I=b[1],S=(0,a.useState)(!1),D=(0,d.Z)(S,2),M=D[0],A=D[1],B=(0,a.useState)(!1),F=(0,d.Z)(B,2),O=F[0],R=F[1],E=(0,a.useContext)(P.Z).user,T=(0,Z.s0)(),G=function(){var e=(0,i.Z)((0,u.Z)().mark((function e(t){var r;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),R(!0),e.prev=2,e.next=5,N.Z.put("/api/product/edit/".concat(y),{forSale:k},{headers:{"Content-Type":"application/json"}});case 5:r=e.sent,j.Am.success(r.data.message),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),j.Am.error(e.t0.response.data.message);case 12:return e.prev=12,R(!1),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[2,9,12,15]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=(0,i.Z)((0,u.Z)().mark((function e(){var t;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A(!0),null!==E&&void 0!==E&&E.token){e.next=3;break}return e.abrupt("return",T("/login"));case 3:return e.prev=3,e.next=6,N.Z.post("/api/product/cart/".concat(y));case 6:t=e.sent,j.Am.success(t.data.message),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(3),console.log(e.t0),j.Am.error(e.t0.response.data.message);case 14:return e.prev=14,A(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[3,10,14,17]])})));return function(){return e.apply(this,arguments)}}();return(0,s.jsxs)("div",{className:l,children:[(0,s.jsx)("div",{className:m,children:(0,s.jsx)("p",{children:t})}),(0,s.jsx)("div",{className:h,children:(0,s.jsxs)("p",{children:["\u20b9 ",r]})}),(0,s.jsx)(s.Fragment,{children:C?(0,s.jsx)("div",{className:g,children:c?"Sold":"Not Sold"}):n?c?(0,s.jsx)("div",{className:g,children:"Sold"}):(0,s.jsxs)(v.l0,{onSubmit:G,className:_,children:[(0,s.jsxs)(v.__,{check:!0,className:p,children:[(0,s.jsx)(v.II,{type:"checkbox",checked:k,onChange:function(){I((function(e){return!e}))}}),"For Sale"]}),(0,s.jsx)("button",{className:x,children:O?(0,s.jsx)(v.$j,{}):"Update"})]}):(0,s.jsx)("button",{className:f,title:"Add to Cart",onClick:z,children:M?(0,s.jsx)(v.$j,{}):"Add To Cart"})})]})},C="ProductImage_imageContainer__nYj1K",w=function(e){var t=e.image;return(0,s.jsx)("div",{className:C,children:(0,s.jsx)("img",{src:"data:image/*;base64,".concat(t),alt:"Product Image",width:"100%",height:"100%",style:{objectFit:"contain"}})})},b=function(e){var t=e.product,r=t.name,n=t.price,a=t.image,c=t.sold,u=t.forSale,i=t._id,d=e.onOwnPage,l=e.onCart;return(0,s.jsxs)(o,{children:[(0,s.jsx)(w,{image:a}),(0,s.jsx)(y,{name:r,price:n,sold:c,forSale:u,onOwnPage:d,productId:i,onCart:l})]})},k="ProductGrid_grid__v9pJc",I=function(e){var t=e.children,r=e.style;return(0,s.jsx)("div",{className:k,style:(0,n.Z)({},r),children:t})},S=function(e){var t=e.products,r=e.style,a=e.onOwnPage,c=e.onCart;return(0,s.jsx)(I,{style:(0,n.Z)({},r),children:t.map((function(e,t){return(0,s.jsx)(b,{product:e,onOwnPage:a,onCart:c},t)}))})}},9940:function(e,t,r){r.r(t),r.d(t,{default:function(){return x}});var n=r(3433),a=r(4165),c=r(5861),s=r(9439),o=r(2791),u=r(2388),i=r(4030),d={myProductsContainer:"MyProductsPage_myProductsContainer__GMuHk",createProductContainer:"MyProductsPage_createProductContainer__QfKoT",innerContainer:"MyProductsPage_innerContainer__adcOs",box:"MyProductsPage_box__1ur8z",heading:"MyProductsPage_heading__jwbEf",addProductImage:"MyProductsPage_addProductImage__MNMGx",productNameInput:"MyProductsPage_productNameInput__JafBN",createProductBtn:"MyProductsPage_createProductBtn__exZ0y",createBtnContainer:"MyProductsPage_createBtnContainer__RznS1"},l=r(3134),p=r(3463),m=r(5568),h=r.p+"static/media/add_product.280413b2db7eb09eeca1.jpg",f=r(184),x=function(){var e=(0,o.useState)([]),t=(0,s.Z)(e,2),r=t[0],x=t[1],_=(0,o.useState)(!0),g=(0,s.Z)(_,2),v=g[0],j=g[1],P=(0,o.useState)(""),N=(0,s.Z)(P,2),Z=N[0],y=N[1],C=(0,o.useState)(null),w=(0,s.Z)(C,2),b=w[0],k=w[1],I=(0,o.useState)(!1),S=(0,s.Z)(I,2),D=S[0],M=S[1],A=(0,o.useState)(!1),B=(0,s.Z)(A,2),F=B[0],O=B[1],R=(0,o.useRef)(),E=(0,o.useRef)(),T=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.Z.get("/api/product/my/products");case 3:t=e.sent,x(t.data.products),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:return e.prev=10,j(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){T()}),[b]);var G=function(e){return new Promise((function(t,r){var n=new FileReader;n.onloadend=function(){return t(n.result)},n.onerror=r,n.readAsDataURL(e)}))};function z(){return(z=(0,c.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.target.files[0]){e.next=8;break}return e.next=3,G(t.target.files[0]);case 3:r=e.sent.replace("data:","").replace(/^.+,/,""),y(r),k(t.target.files),e.next=10;break;case 8:y(""),k(null);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var K=function(){var e=(0,c.Z)((0,a.Z)().mark((function e(t){var r,c,s,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),O(!0),r=R.current.value,c=E.current.value,!(""===r||c<=0)){e.next=6;break}return e.abrupt("return",m.Am.error("Please fill the form correctly!"));case 6:return e.prev=6,(s=new FormData).append("name",r),s.append("price",c),s.append("forSale",D),s.append("image",b[0]),e.next=14,u.Z.post("/api/product/create",s,{headers:{"Content-Type":"multipart/form-data"}});case 14:o=e.sent,m.Am.success(o.data.message),x((function(e){return[].concat((0,n.Z)(e),[o.data.product])})),k([]),R.current.value="",E.current.value="",e.next=26;break;case 22:e.prev=22,e.t0=e.catch(6),console.log(e.t0),m.Am.error(e.t0.response.data.message);case 26:return e.prev=26,O(!1),e.finish(26);case 29:case"end":return e.stop()}}),e,null,[[6,22,26,29]])})));return function(t){return e.apply(this,arguments)}}();return v?(0,f.jsx)(i.Z,{}):(0,f.jsxs)("div",{className:d.myProductsContainer,children:[(0,f.jsx)("aside",{className:d.createProductContainer,children:(0,f.jsx)("div",{className:d.innerContainer,children:(0,f.jsxs)("div",{className:d.box,children:[(0,f.jsx)("p",{className:d.heading,children:"Create New Product"}),(0,f.jsxs)(p.l0,{onSubmit:function(e){return K(e)},className:d.form,children:[""!==Z&&(0,f.jsx)("img",{src:"data:image/*;base64,".concat(Z),alt:"preview",height:"200px",width:"100%"}),(0,f.jsx)(p.cw,{children:(0,f.jsx)(p.II,{type:"file",className:d.productNameInput,onChange:function(e){return function(e){return z.apply(this,arguments)}(e)}})}),(0,f.jsx)(p.cw,{children:(0,f.jsx)(p.II,{type:"text",innerRef:R,placeholder:"Enter Product Name",className:d.productNameInput})}),(0,f.jsx)(p.cw,{children:(0,f.jsx)(p.II,{type:"number",innerRef:E,min:1,placeholder:"Enter Product Price",className:d.productNameInput})}),(0,f.jsxs)(p.cw,{className:d.createBtnContainer,children:[(0,f.jsxs)(p.__,{check:!0,className:d.heading,children:[(0,f.jsx)(p.II,{type:"checkbox",value:D,onChange:function(){return M((function(e){return!e}))}}),"For Sale"]}),(0,f.jsx)(p.zx,{className:d.createProductBtn,children:F?(0,f.jsx)(p.$j,{}):"Create"})]})]})]})})}),r.length?(0,f.jsx)(l.Z,{products:r,onOwnPage:!0}):(0,f.jsxs)("div",{className:d.addProductImage,children:[(0,f.jsx)("h2",{children:"Start by adding some products!"}),(0,f.jsx)("img",{src:h,alt:"Create products",width:"50%",height:"30%"})]})]})}}}]);
//# sourceMappingURL=875.9839cf24.chunk.js.map